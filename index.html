<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HyperionRP - Serveur Minecraft</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body id="accueil">
  <!-- Menu de navigation fixe -->
  <nav class="nav-fixe">
    <a href="#accueil">🏠 Accueil</a>
    <a href="#staff">👑 Staff</a>
    <a href="#boutique">🛍️ Boutique</a>
    <a href="#recrutement">📋 Recrutement</a>
    <a href="#" onclick="toggleCart()">🛒 Panier (<span id="cartCount">0</span>)</a>
  </nav>

  <!-- En-tête avec bannière -->
  <header>
    <img src="banniere.png" alt="Bannière HyperionRP" class="banner" />
    <h1>HyperionRP</h1>
    <p class="tagline">Plonge dans un monde où chaque joueur écrit sa propre histoire — bienvenue sur HyperionRP</p>
    <div class="buttons">
      <button onclick="copyIP()">📋 Copier l’IP</button>
      <a href="https://discord.gg/fgDnGahS" target="_blank"><button>💬 Rejoindre le Discord</button></a>
    </div>
  </header>

  <!-- Section Staff -->
  <section id="staff" class="staff-section">
    <h2>👑 L'Équipe HyperionRP</h2>
    <div class="staff-cards">
      <div class="staff-card">
        <img src="https://mc-heads.net/avatar/matouchima" alt="matouchima">
        <h3>matouchima <span class="badge badge-fondateur">Grand Fondateur</span></h3>
        <p>Créateur du projet HyperionRP, garant de la vision et du développement global.</p>
      </div>
      <div class="staff-card">
        <img src="https://mc-heads.net/avatar/mz_dragon" alt="mz_dragon">
        <h3>mz_dragon <span class="badge">Gérant Staff</span></h3>
        <p>Responsable de la gestion et de l'organisation du serveur.</p>
      </div>
      <div class="staff-card">
        <img src="https://mc-heads.net/avatar/tatane" alt="tatane">
        <h3>tatane <span class="badge">Aide Développeur</span></h3>
        <p>Assiste dans le développement et les correctifs techniques.</p>
      </div>
      <div class="staff-card">
        <img src="https://mc-heads.net/avatar/le%20chat%20fumeur" alt="le chat fumeur">
        <h3>le chat fumeur <span class="badge">Aide Développeur</span></h3>
        <p>Apporte son soutien dans la configuration et les scripts RP.</p>
      </div>
    </div>
  </section>

  <!-- Section Boutique -->
  <section id="boutique" class="boutique">
    <h2>🌟 Boutique HyperionRP</h2>
    <div class="produits">
      <div class="carte-produit">
        <h3>Grade VIP</h3>
        <p>Accès à des privilèges exclusifs, salon Discord privé, effets cosmiques.</p>
        <span class="prix">4.99€</span>
        <button class="bouton-achat" onclick="addToCart('Grade VIP', 4.99)">Ajouter au panier</button>
      </div>
      <div class="carte-produit">
        <h3>Kit de départ</h3>
        <p>Tout ce qu’il faut pour bien commencer l’aventure RP !</p>
        <span class="prix">2.50€</span>
        <button class="bouton-achat" onclick="addToCart('Kit de départ', 2.50)">Ajouter au panier</button>
      </div>
      <div class="carte-produit">
        <h3>Achat d’argent virtuel</h3>
        <p>Obtiens de la monnaie en jeu pour acheter des items exclusifs.</p>
        <span class="prix">5.00€</span>
        <button class="bouton-achat" onclick="addToCart('Achat d’argent virtuel', 5.00)">Ajouter au panier</button>
      </div>
      <div class="carte-produit">
        <h3>Don Libre</h3>
        <p>Soutiens le serveur et la communauté !</p>
        <span class="prix">Montant libre</span>
        <button class="bouton-achat" onclick="addDonationToCart()">Ajouter au panier</button>
      </div>
    </div>
    <p class="avertissement">⚠️ Avertissement : les dons libres ne sont pas remboursables.</p>
  </section>

  <!-- Section Recrutement -->
  <section id="recrutement" class="recrutement">
    <h2>📋 Recrutement Staff HyperionRP</h2>
    <p>Remplis ce formulaire Google si tu souhaites rejoindre notre équipe !</p>
    <iframe
      src="https://docs.google.com/forms/d/e/1FAIpQLSck46po1bWV6uiB4I4J8fyqy36n4W1wVD58dL1YIvkUDzQL6A/viewform?embedded=true"
      width="100%"
      height="800"
      frameborder="0"
      marginheight="0"
      marginwidth="0">
      Chargement…
    </iframe>
  </section>

  <!-- Panier -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-modal-content">
      <span class="cart-close" onclick="toggleCart()">&times;</span>
      <h2>🛒 Mon Panier</h2>
      <div id="cartItems" class="cart-items">
        <!-- Les articles seront ajoutés ici dynamiquement -->
      </div>
      <div class="cart-total">
        <p>Total : <span id="cartTotal">0.00€</span></p>
      </div>
      <!-- Bouton de paiement PayPal -->
      <div id="paypal-button-container" style="margin-top: 20px;"></div>
    </div>
  </div>

  <!-- Pied de page -->
  <footer>
    <p>&copy; 2025 HyperionRP. Tous droits réservés.</p>
  </footer>

  <!-- Scripts -->
  <script>
    // Copier l'IP
    function copyIP() {
      navigator.clipboard.writeText("hyperionrp.aternos.me");
      alert("IP copiée : hyperionrp.aternos.me");
    }

    // Gestion du panier
    let cart = [];

    // Afficher/masquer le panier
    function toggleCart() {
      const cartModal = document.getElementById('cartModal');
      cartModal.style.display = cartModal.style.display === 'block' ? 'none' : 'block';
      updateCart();
    }

    // Ajouter un article au panier
    function addToCart(name, price) {
      const existingItem = cart.find(item => item.name === name);
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({ name, price, quantity: 1 });
      }
      updateCart();
    }

    // Ajouter un don libre au panier
    function addDonationToCart() {
      const amount = prompt("Quel montant souhaitez-vous donner ? (en €)");
      if (amount && !isNaN(amount) && amount > 0) {
        const existingDonation = cart.find(item => item.name === "Don Libre");
        if (existingDonation) {
          existingDonation.price += parseFloat(amount);
        } else {
          cart.push({ name: "Don Libre", price: parseFloat(amount), quantity: 1 });
        }
        updateCart();
      } else {
        alert("Veuillez entrer un montant valide.");
      }
    }

    // Mettre à jour le panier
    function updateCart() {
      const cartItems = document.getElementById('cartItems');
      const cartCount = document.getElementById('cartCount');
      const cartTotal = document.getElementById('cartTotal');

      cartItems.innerHTML = '';
      let total = 0;
      let totalItems = 0;

      cart.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'cart-item';
        itemDiv.innerHTML = `
          <div class="item-info">
            <p><strong>${item.name}</strong> : ${item.price.toFixed(2)}€</p>
            <div class="item-quantity">
              <button onclick="changeQuantity('${item.name}', -1)">-</button>
              <span>${item.quantity}</span>
              <button onclick="changeQuantity('${item.name}', 1)">+</button>
            </div>
          </div>
          <span class="item-total">${(item.price * item.quantity).toFixed(2)}€</span>
          <span class="remove-item" onclick="removeFromCart('${item.name}')">❌</span>
        `;
        cartItems.appendChild(itemDiv);
        total += item.price * item.quantity;
        totalItems += item.quantity;
      });

      cartCount.textContent = totalItems;
      cartTotal.textContent = `${total.toFixed(2)}€`;
    }

    // Changer la quantité d'un article
    function changeQuantity(name, change) {
      const item = cart.find(item => item.name === name);
      if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
          cart = cart.filter(item => item.name !== name);
        }
        updateCart();
      }
    }

    // Retirer un article du panier
    function removeFromCart(name) {
      cart = cart.filter(item => item.name !== name);
      updateCart();
    }

    // Fermer le panier en cliquant à l'extérieur
    window.onclick = function(event) {
      const cartModal = document.getElementById('cartModal');
      if (event.target === cartModal) {
        cartModal.style.display = 'none';
      }
    }
  </script>

  <!-- Script PayPal -->
  <script src="https://www.paypal.com/sdk/js?client-id=AQNXEa6lobefEuCcP4YCkhCTomgSviJsXBx_At2JBl4M2DwnF9bNafOOfs7qeDxFgN4C8TAH4zEsURDI&currency=EUR"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      paypal.Buttons({
        createOrder: function(data, actions) {
          const totalElement = document.getElementById('cartTotal');
          const total = parseFloat(totalElement.textContent.replace('€', '').trim());

          if (total <= 0) {
            alert("Ton panier est vide !");
            return false;
          }

          return actions.order.create({
            purchase_units: [{
              amount: {
                value: total.toFixed(2)
              }
            }]
          });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details) {
            alert('Paiement réussi ! Merci pour ton achat.');
            cart = []; // Vider le panier après paiement
            updateCart();
          });
        },
        onCancel: function(data) {
          alert('Paiement annulé.');
        },
        onError: function(err) {
          console.error('Erreur PayPal:', err);
          alert('Une erreur est survenue lors du paiement.');
        }
      }).render('#paypal-button-container');
    });
  </script>
</body>
</html>
