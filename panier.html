<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mon Panier - HyperionRP</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav class="nav-fixe">
    <a href="index.html#accueil">🏠 Accueil</a>
    <a href="index.html#staff">👑 Staff</a>
    <a href="index.html#boutique">🛍️ Boutique</a>
    <a href="index.html#recrutement">📋 Recrutement</a>
    <a href="panier.html" class="btn-panier">🛒 Voir le panier</a>
  </nav>

  <section class="panier-page">
    <h2>🛒 Mon panier</h2>
    <ul id="liste-panier"></ul>
    <p>Total : <span id="modal-total">0.00€</span></p>
    <button onclick="validerPanier()">Valider la commande</button>
    <a href="index.html#boutique" class="btn-retour">Retour à la boutique</a>
    <p id="confirmation" style="color:#27ae60;display:none;">Merci pour votre commande !</p>
  </section>

  <footer>
    <p>&copy; 2025 HyperionRP. Tous droits réservés.</p>
  </footer>

  <script>
    // Récupère le panier depuis le stockage local
    let panier = JSON.parse(localStorage.getItem('panier') || '[]');

    function afficherPanier() {
      let liste = document.getElementById('liste-panier');
      liste.innerHTML = '';
      panier.forEach((item, i) => {
        let li = document.createElement('li');
        li.innerHTML = `
          <strong>${item.nom}</strong>
          – <input type="number" min="1" value="${item.quantite}" style="width:40px;" onchange="changerQuantite(${i}, this.value)">
          × ${item.prix.toFixed(2)}€
          <button onclick="supprimerProduit(${i})">Supprimer</button>
        `;
        liste.appendChild(li);
      });
      document.getElementById('modal-total').innerText = panier.reduce((sum, item) => sum + item.prix * item.quantite, 0).toFixed(2) + "€";
    }

    function changerQuantite(index, val) {
      val = parseInt(val);
      if (isNaN(val) || val < 1) val = 1;
      panier[index].quantite = val;
      localStorage.setItem('panier', JSON.stringify(panier));
      afficherPanier();
    }

    function supprimerProduit(index) {
      panier.splice(index, 1);
      localStorage.setItem('panier', JSON.stringify(panier));
      afficherPanier();
    }

    function validerPanier() {
      document.getElementById('confirmation').style.display = "block";
      panier = [];
      localStorage.setItem('panier', JSON.stringify(panier));
      afficherPanier();
    }

    afficherPanier();
  </script>
</body>
</html>
